---
import '../styles/global.css'
import NavBar from '../components/NavBar.astro'
import Footer from '../components/Footer.astro'
const { title = 'Jalen Evans' } = Astro.props
---

<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>{title}</title>
    <link rel="icon" type="image/svg+xml" sizes="180x180" href="/favicon.svg" />
    <script is:inline>
      ;(function () {
        const savedTheme = localStorage.getItem('theme')
        const systemTheme = window.matchMedia('(prefers-color-scheme: dark)')
          .matches
          ? 'dark'
          : 'light'
        const theme = savedTheme || systemTheme

        if (theme === 'dark') {
          document.documentElement.classList.add('dark')
        } else {
          document.documentElement.classList.remove('dark')
        }
      })()
    </script>
    <script>
      // Define the types for MailerLite
      interface MailerLiteWindow extends Window {
        ml: {
          (command: string, ...args: any[]): void
          q?: any[]
        }
      }

      // Cast window to our custom type
      const w = window as unknown as MailerLiteWindow

      ;(function (w: any, d: Document, e: string, u: string, f: 'ml') {
        w[f] =
          w[f] ||
          function () {
            ;(w[f].q = w[f].q || []).push(arguments)
          }
        const l = d.createElement(e) as HTMLScriptElement
        l.async = true
        l.src = u
        const n = d.getElementsByTagName(e)[0]
        n.parentNode?.insertBefore(l, n)
      })(
        window,
        document,
        'script',
        'https://assets.mailerlite.com/js/universal.js',
        'ml',
      )

      // Now you can call it without errors
      w.ml('account', '2089296')
    </script>
  </head>
  <body class="flex flex-col min-h-screen">
    <NavBar />
    <main class="flex-1">
      <slot />
    </main>
    <Footer />
  </body>
</html>
